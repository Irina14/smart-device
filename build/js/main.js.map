{"version":3,"sources":["footer.js","form.js","popup.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n(function () {\n  // Открытие и закрытие блоков в футоре\n  var footerBlock = document.querySelector('.footer__blocks');\n\n  if (footerBlock) {\n    var footerBlocks = footerBlock.querySelectorAll('.footer__block');\n\n    footerBlock.classList.remove('footer__blocks--nojs');\n\n    Array.prototype.slice.call(footerBlocks).forEach(function (block) {\n      var footerButton = block.querySelector('.footer__button');\n      footerButton.addEventListener('click', function () {\n        block.classList.toggle('footer__block--open');\n      });\n    });\n  }\n})();\n\n","'use strict';\n\n(function () {\n  var form = document.querySelector('.form__question');\n\n  if (form) {\n    var userNameInput = form.querySelector('#user-name');\n    var userPhoneInput = form.querySelector('#user-phone');\n    var questionTextarea = form.querySelector('#question');\n    var checkbox = form.querySelector('#consent');\n    var checkboxLabel = form.querySelector('.form__checkbox label');\n    var fieldPhone = form.querySelector('.form__field--phone');\n    var formButton = form.querySelector('.form__button');\n\n    // Создание сообщения об ошибке\n    var createMessage = function (text, field, classError) {\n      var message = document.createElement('span');\n      message.classList.add(classError);\n      field.appendChild(message);\n      message.textContent = text;\n    };\n\n    // Удаление сообщения об ошибке\n    var removeMessage = function (field, selector) {\n      var errorText = field.querySelector(selector);\n      if (errorText) {\n        field.removeChild(errorText);\n      }\n    };\n\n    // Проверка валидности номера телефона\n    var validPhone = function (input) {\n      var reg = /^\\d[\\d\\(\\)\\ -]{4,14}\\d$/;\n      var phoneValue = input.value;\n      var valid = reg.test(phoneValue);\n      return valid;\n    };\n\n    // Проверка валидности поля\n    var validField = function (field) {\n      if (!field.validity.valid) {\n        field.classList.add('form__error');\n      } else {\n        field.classList.remove('form__error');\n      }\n    };\n\n    var formButtonClickHandler = function (evt) {\n      validField(userNameInput);\n      validField(userPhoneInput);\n\n      if (userPhoneInput.validity.valid && !validPhone(userPhoneInput)) {\n        evt.preventDefault();\n        userPhoneInput.classList.add('form__error');\n        if (!fieldPhone.querySelector('.form__error-text')) {\n          createMessage('Неккоректный телефон', fieldPhone, 'form__error-text');\n        }\n      } else {\n        evt.returnValue = true;\n        removeMessage(fieldPhone, '.form__error-text');\n      }\n\n      validField(questionTextarea);\n\n      if (!checkbox.checked) {\n        checkboxLabel.classList.add('form__error');\n      } else {\n        checkboxLabel.classList.remove('form__error');\n      }\n    };\n\n    formButton.addEventListener('click', formButtonClickHandler);\n\n    window.form = {\n      createMessage: createMessage,\n      removeMessage: removeMessage,\n      validPhone: validPhone\n    };\n  }\n})();\n","'use strict';\n\n(function () {\n  var popup = document.querySelector('.popup');\n\n  if (popup) {\n    var ESC_KEYCODE = 27;\n    var body = document.querySelector('body');\n    var headerButton = document.querySelector('.header__button');\n    var popupClose = popup.querySelector('.popup__close');\n    var popupOverlay = popup.querySelector('.popup__overlay');\n    var userNameInput = popup.querySelector('#user-name-popup');\n    var userPhoneInput = popup.querySelector('#user-phone-popup');\n    var questionTextarea = popup.querySelector('#question-popup');\n    var checkbox = popup.querySelector('#consent-popup');\n    var checkboxLabel = popup.querySelector('.popup__checkbox label');\n    var fieldPhone = popup.querySelector('.popup__field--phone');\n    var popupButton = popup.querySelector('.popup__button');\n    var isStorageSupport = true;\n    var storageName = '';\n    var storagePhone = '';\n    var storageQuestion = '';\n\n    try {\n      storageName = localStorage.getItem('name');\n      storagePhone = localStorage.getItem('phone');\n      storageQuestion = localStorage.getItem('question');\n    } catch (err) {\n      isStorageSupport = false;\n    }\n\n    // Открытие и закрытие попап\n    var closePopup = function () {\n      popup.classList.remove('popup--open');\n      body.classList.remove('popup-open-body');\n      document.removeEventListener('keydown', documentEscKeyHandler);\n    };\n\n    var documentEscKeyHandler = function (evt) {\n      if (evt.keyCode === ESC_KEYCODE) {\n        closePopup();\n      }\n    };\n\n    headerButton.addEventListener('click', function (evt) {\n      evt.preventDefault();\n      popup.classList.add('popup--open');\n      body.classList.add('popup-open-body');\n      userNameInput.focus();\n      document.addEventListener('keydown', documentEscKeyHandler);\n\n      if (storageName || storagePhone || storageQuestion) {\n        userNameInput.value = storageName;\n        userPhoneInput.value = storagePhone;\n        questionTextarea.value = storageQuestion;\n      }\n    });\n\n    popupClose.addEventListener('click', function () {\n      closePopup();\n    });\n\n    popupOverlay.addEventListener('click', function () {\n      closePopup();\n    });\n\n    // Валидация формы\n    var validField = function (field, key) {\n      if (!field.validity.valid) {\n        field.classList.add('popup__error');\n      } else {\n        field.classList.remove('popup__error');\n        if (isStorageSupport) {\n          localStorage.setItem(key, field.value);\n        }\n      }\n    };\n\n    var popupButtonClickHandler = function (evt) {\n      validField(userNameInput, 'name');\n      validField(userPhoneInput, 'phone');\n\n      if (userPhoneInput.validity.valid && !window.form.validPhone(userPhoneInput)) {\n        evt.preventDefault();\n        userPhoneInput.classList.add('popup__error');\n        if (!fieldPhone.querySelector('.popup__error-text')) {\n          window.form.createMessage('Неккоректный телефон', fieldPhone, 'popup__error-text');\n        }\n      } else {\n        evt.returnValue = true;\n        window.form.removeMessage(fieldPhone, '.popup__error-text');\n        if (isStorageSupport) {\n          localStorage.setItem('phone-popup', userPhoneInput.value);\n        }\n      }\n\n      validField(questionTextarea, 'question');\n\n      if (!checkbox.checked) {\n        checkboxLabel.classList.add('popup__error');\n      } else {\n        checkboxLabel.classList.remove('popup__error');\n      }\n    };\n\n    popupButton.addEventListener('click', popupButtonClickHandler);\n  }\n})();\n"]}
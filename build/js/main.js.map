{"version":3,"sources":["footer.js","form.js","main-screen.js","popup.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n(function () {\n  // Открытие и закрытие блоков в футоре\n  var footerBlock = document.querySelector('.footer__blocks');\n\n  if (footerBlock) {\n    var footerBlocks = footerBlock.querySelectorAll('.footer__block');\n\n    footerBlock.classList.remove('footer__blocks--nojs');\n\n    var closeBlocks = function () {\n      Array.prototype.slice.call(footerBlocks).forEach(function (block) {\n        block.classList.remove('footer__block--open');\n      });\n    };\n\n    Array.prototype.slice.call(footerBlocks).forEach(function (block) {\n      var footerButton = block.querySelector('.footer__button');\n      footerButton.addEventListener('click', function () {\n        if (block.classList.contains('footer__block--open')) {\n          block.classList.remove('footer__block--open');\n        } else {\n          closeBlocks();\n          block.classList.add('footer__block--open');\n        }\n      });\n    });\n  }\n})();\n\n","'use strict';\n\n(function () {\n  var form = document.querySelector('.form__question');\n\n  if (form) {\n    var userNameInput = form.querySelector('#user-name');\n    var userPhoneInput = form.querySelector('#user-phone');\n    var questionTextarea = form.querySelector('#question');\n    var checkbox = form.querySelector('#consent');\n    var checkboxLabel = form.querySelector('.form__checkbox label');\n    var fieldPhone = form.querySelector('.form__field--phone');\n    var formButton = form.querySelector('.form__button');\n    var fields = [userNameInput, userPhoneInput, questionTextarea, checkboxLabel];\n\n    // Маска для поля ввода телефона\n    var phoneMask = IMask(userPhoneInput, {\n      mask: '+7(000)000-00-00'\n    });\n\n    // Проверка валидности номера телефона\n    var validPhone = function (mask) {\n      var reg = /^\\d{10}$/;\n      var phoneValue = mask.unmaskedValue;\n      var valid = reg.test(phoneValue);\n      return valid;\n    };\n\n    // Создание сообщения об ошибке\n    var createMessage = function (text, field, classError) {\n      var message = document.createElement('span');\n      message.classList.add(classError);\n      field.appendChild(message);\n      message.textContent = text;\n    };\n\n    // Удаление сообщения об ошибке\n    var removeMessage = function (field, selectorError) {\n      var errorText = field.querySelector(selectorError);\n      if (errorText) {\n        field.removeChild(errorText);\n      }\n    };\n\n    // Проверка валидности поля\n    var validField = function (field) {\n      if (!field.validity.valid) {\n        field.classList.add('form__error');\n      } else {\n        field.classList.remove('form__error');\n      }\n    };\n\n    // Удаление обводки ошибки\n    var removeError = function (arrayFields, classError) {\n      arrayFields.forEach(function (field) {\n        if (field.classList.contains(classError)) {\n          field.classList.remove(classError);\n        }\n      });\n    };\n\n    var formButtonClickHandler = function (evt) {\n      validField(userNameInput);\n      validField(userPhoneInput);\n\n      if (userPhoneInput.validity.valid && !validPhone(phoneMask)) {\n        evt.preventDefault();\n        userPhoneInput.classList.add('form__error');\n        if (!fieldPhone.querySelector('.form__error-text')) {\n          createMessage('Неккоректный телефон', fieldPhone, 'form__error-text');\n        }\n      } else {\n        evt.returnValue = true;\n        removeMessage(fieldPhone, '.form__error-text');\n      }\n\n      validField(questionTextarea);\n\n      if (!checkbox.checked) {\n        checkboxLabel.classList.add('form__error');\n      } else {\n        checkboxLabel.classList.remove('form__error');\n      }\n    };\n\n    var documentClickHandler = function (evt) {\n      if (evt.target !== formButton) {\n        removeError(fields, 'form__error');\n        removeMessage(fieldPhone, '.form__error-text');\n      }\n    };\n\n    formButton.addEventListener('click', formButtonClickHandler);\n    document.addEventListener('click', documentClickHandler);\n\n    window.form = {\n      createMessage: createMessage,\n      removeMessage: removeMessage,\n      validPhone: validPhone,\n      removeError: removeError\n    };\n  }\n})();\n","'use strict';\n\n(function () {\n  // Плавный переход по якорной ссылке\n  var mainScreenButton = document.querySelector('.main-screen__button');\n\n  if (mainScreenButton) {\n\n    $(document).ready(function () {\n      $('.main-screen__button').on('click', function (evt) {\n        evt.preventDefault();\n        var id = $(this).attr('href');\n        var top = $(id).offset().top;\n        $('body,html').animate({scrollTop: top}, 2000);\n      });\n    });\n  }\n\n  var mainScreenLink = document.querySelector('.main-screen__link');\n\n  if (mainScreenLink) {\n    $(document).ready(function () {\n      $('.main-screen__link').on('click', function (evt) {\n        evt.preventDefault();\n        var id = $(this).attr('href');\n        var top = $(id).offset().top;\n        $('body,html').animate({scrollTop: top}, 1500);\n      });\n    });\n  }\n})();\n","'use strict';\n\n(function () {\n  var popup = document.querySelector('.popup');\n\n  if (popup) {\n    var ESC_KEYCODE = 27;\n    var body = document.querySelector('body');\n    var headerButton = document.querySelector('.header__button');\n    var popupClose = popup.querySelector('.popup__close');\n    var popupOverlay = document.querySelector('.popup-overlay');\n    var userNameInput = popup.querySelector('#user-name-popup');\n    var userPhoneInput = popup.querySelector('#user-phone-popup');\n    var questionTextarea = popup.querySelector('#question-popup');\n    var checkbox = popup.querySelector('#consent-popup');\n    var checkboxLabel = popup.querySelector('.popup__checkbox label');\n    var fieldPhone = popup.querySelector('.popup__field--phone');\n    var popupButton = popup.querySelector('.popup__button');\n    var fields = [userNameInput, userPhoneInput, questionTextarea, checkboxLabel];\n    var isStorageSupport = true;\n    var storageName = '';\n    var storagePhone = '';\n    var storageQuestion = '';\n\n    try {\n      storageName = localStorage.getItem('name');\n      storagePhone = localStorage.getItem('phone');\n      storageQuestion = localStorage.getItem('question');\n    } catch (err) {\n      isStorageSupport = false;\n    }\n\n    // Открытие и закрытие попап\n    var closePopup = function () {\n      popupOverlay.classList.remove('popup-overlay--open');\n      body.classList.remove('popup-open-body');\n      document.removeEventListener('keydown', documentEscKeyHandler);\n    };\n\n    var documentEscKeyHandler = function (evt) {\n      if (evt.keyCode === ESC_KEYCODE) {\n        closePopup();\n      }\n    };\n\n    headerButton.addEventListener('click', function (evt) {\n      evt.preventDefault();\n      popupOverlay.classList.add('popup-overlay--open');\n      body.classList.add('popup-open-body');\n      userNameInput.focus();\n      document.addEventListener('keydown', documentEscKeyHandler);\n\n      if (storageName || storagePhone || storageQuestion) {\n        userNameInput.value = storageName;\n        userPhoneInput.value = storagePhone;\n        questionTextarea.value = storageQuestion;\n      }\n    });\n\n    popupClose.addEventListener('click', function () {\n      closePopup();\n    });\n\n    popup.addEventListener('click', function (evt) {\n      evt.stopPropagation();\n    });\n\n    popupOverlay.addEventListener('click', function () {\n      closePopup();\n    });\n\n    // Маска для поля ввода телефона\n    var phoneMask = IMask(userPhoneInput, {\n      mask: '+7(000)000-00-00'\n    });\n\n    // Валидация формы\n    var validField = function (field, key) {\n      if (!field.validity.valid) {\n        field.classList.add('popup__error');\n      } else {\n        field.classList.remove('popup__error');\n        if (isStorageSupport) {\n          localStorage.setItem(key, field.value);\n        }\n      }\n    };\n\n    var popupButtonClickHandler = function (evt) {\n      validField(userNameInput, 'name');\n      validField(userPhoneInput, 'phone');\n\n      if (userPhoneInput.validity.valid && !window.form.validPhone(phoneMask)) {\n        evt.preventDefault();\n        userPhoneInput.classList.add('popup__error');\n        if (!fieldPhone.querySelector('.popup__error-text')) {\n          window.form.createMessage('Неккоректный телефон', fieldPhone, 'popup__error-text');\n        }\n      } else {\n        evt.returnValue = true;\n        window.form.removeMessage(fieldPhone, '.popup__error-text');\n        if (isStorageSupport) {\n          localStorage.setItem('phone-popup', userPhoneInput.value);\n        }\n      }\n\n      validField(questionTextarea, 'question');\n\n      if (!checkbox.checked) {\n        checkboxLabel.classList.add('popup__error');\n      } else {\n        checkboxLabel.classList.remove('popup__error');\n      }\n    };\n\n    var popupClickHandler = function (evt) {\n      if (evt.target !== popupButton) {\n        window.form.removeError(fields, 'popup__error');\n        window.form.removeMessage(fieldPhone, '.popup__error-text');\n      }\n    };\n\n    popupButton.addEventListener('click', popupButtonClickHandler);\n    popup.addEventListener('click', popupClickHandler);\n  }\n})();\n"]}